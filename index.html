```html
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sanya 2025 Wrapped</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="app">
  <div class="progress" id="progress" aria-hidden="true"></div>

  <div class="track" id="track"></div>

  <div class="hint">–ü—Ä–æ—Å—Ç–æ –ª–∏—Å—Ç–∞–π –≤–ø—Ä–∞–≤–æ</div>
  <div class="dots" id="dots"></div>

  <div class="controls">
    <button class="btn" id="prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ª–∞–π–¥">‚Üê</button>
    <button class="btn" id="next" aria-label="–°–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥">‚Üí</button>
  </div>
</div>

<script>
(() => {
  const slides = [
    {pill:"Wrapped 2025",title:"–ò—Ç–æ–≥–∏",big:"2025",desc:"–ù–µ–º–Ω–æ–≥–æ —Ü–∏—Ñ—Ä –∏ –Ω–µ–º–Ω–æ–≥–æ —é–º–æ—Ä–∞."},
    {pill:"Wrapped 2025",title:"–ë—ç–º–±–∏ —Ç—è–≤–∫–Ω—É–ª–∞",big:"‚âà 5",desc:"–ù–æ –æ–Ω–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ç–µ–±—è –ª—é–±–∏—Ç –±–æ–ª—å—à–µ –≤—Å–µ—Ö."},
    {pill:"Wrapped 2025",title:"–°–ª–æ–≤–æ ¬´–∫–∞–∫–∞—Ç—å¬ª",big:"32",desc:"–ö–∞–∫–∞–ª–∏ –º—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É."},
    {pill:"Wrapped 2025",title:"¬´–ß—Ç–æ –Ω–∞ —É–∂–∏–Ω?¬ª",big:"30",desc:"–ì–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å –≥–æ–¥–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø—ã—Ç–∞–ª–∏—Å—å –ø—Ä–∏–¥—É–º–∞—Ç—å –æ—Ç–≤–µ—Ç."},
    {pill:"Wrapped 2025",title:"¬´–Ø –≤—ã—à–µ–ª¬ª",big:"29 —Ä–∞–∑",desc:"–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ."},
    {pill:"Wrapped 2025",title:"¬´–ß–º–æ–∫¬ª",big:"398",desc:"–ü–æ—á—Ç–∏ 400 ‚Äî –Ω–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –±–æ–ª—å—à–µ. –¶–µ–ª—å –Ω–∞ 2026 —Ö3"},
    {pill:"Wrapped 2025",title:"–ü–æ–±—ã–≤–∞–ª–∏ –≤ –Ω–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö",big:"2 —Ä–∞–∑–∞",desc:"–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ –∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥."},
    {pill:"Wrapped 2025",title:"–ü—Ä–æ–≤–µ–ª–∏ –Ω–æ–Ω-—Å—Ç–æ–ø",big:"7 200 –º–∏–Ω.",desc:"–ò –¥–∞–∂–µ –Ω–µ —Ä—É–≥–∞–ª–∏—Å—å!"},
    {pill:"Wrapped 2025",title:"–°–∞–º—ã–π —Å–ø–æ–∫–æ–π–Ω—ã–π –º–æ–º–µ–Ω—Ç",big:"–°–æ–Ω",desc:"–ö–æ–≥–¥–∞ —è –¥–æ—Å—Ç–∞—é —Ç–µ–±—è –Ω–æ–∂–∫–æ–π."},
    {pill:"Wrapped 2025",title:"–õ—É—á—à–µ–µ –∑–∞ –≥–æ–¥",big:"–¢—ã",desc:"–ü—É—Å—Ç—å 2026 –±—É–¥–µ—Ç –µ—â—ë –ª—É—á—à–µ. –Ø ‚ù§Ô∏è —Ç–µ–±—è!"}
  ];

  const app = document.querySelector(".app");
  const track = document.getElementById("track");
  const dots = document.getElementById("dots");
  const progress = document.getElementById("progress");

  let index = 0;

  // ===== Render slides =====
  slides.forEach((s, i) => {
    const slide = document.createElement("section");
    slide.className = "slide";
    slide.innerHTML = `
      <div class="card">
        <div class="card-inner">
          <div class="meta">
            <div class="pill">üéâ ${s.pill}</div>
            <div>${i + 1}/${slides.length}</div>
          </div>
          <h1 class="title">${s.title}</h1>
          <div class="big">${s.big}</div>
          <p class="desc">${s.desc}</p>
        </div>
      </div>
    `;
    track.appendChild(slide);

    const dot = document.createElement("div");
    dot.className = "dot";
    dot.addEventListener("click", () => go(i, { animate: true }));
    dots.appendChild(dot);
  });

  // ===== Progress segments =====
  const segs = [];
  slides.forEach((_, i) => {
    const seg = document.createElement("div");
    seg.className = "seg";
    seg.innerHTML = `<div class="fill"></div>`;
    seg.addEventListener("click", () => go(i, { animate: true }));
    progress.appendChild(seg);
    segs.push(seg);
  });

  function slideWidth(){
    return app.clientWidth; // –í–ê–ñ–ù–û: —à–∏—Ä–∏–Ω–∞ –æ–¥–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞, –∞ –Ω–µ —à–∏—Ä–∏–Ω–∞ track
  }

  function baseXForIndex(i){
    return -i * slideWidth();
  }

  function setTrackPx(px, animate){
    track.classList.toggle("no-anim", !animate);
    track.style.transform = `translate3d(${px}px,0,0)`;
  }

  function setActiveUI(dirClass){
    document.querySelectorAll(".slide").forEach((s, j) => {
      s.classList.remove("active", "from-right", "from-left");
      if (j === index) s.classList.add("active", dirClass);
    });

    document.querySelectorAll(".dot").forEach((d, j) => {
      d.classList.toggle("active", j === index);
    });

    segs.forEach((seg, j) => {
      const fill = seg.querySelector(".fill");
      if (j < index) fill.style.transform = "scaleX(1)";
      else if (j > index) fill.style.transform = "scaleX(0)";
      else fill.style.transform = "scaleX(1)";
    });
  }

  function setProgressDuringDrag(dragX){
    const w = slideWidth();
    if (!w) return;

    const f = Math.max(-1, Math.min(1, dragX / w));
    const cur = segs[index]?.querySelector(".fill");
    const next = segs[index + 1]?.querySelector(".fill");
    const prev = segs[index - 1]?.querySelector(".fill");

    // base state
    segs.forEach((seg, j) => {
      const fill = seg.querySelector(".fill");
      if (j < index) fill.style.transform = "scaleX(1)";
      else if (j > index) fill.style.transform = "scaleX(0)";
      else fill.style.transform = "scaleX(1)";
    });

    if (f < 0 && next && cur){
      const t = Math.min(1, Math.max(0, -f));
      cur.style.transform = `scaleX(${1 - t})`;
      next.style.transform = `scaleX(${t})`;
    } else if (f > 0 && prev && cur){
      const t = Math.min(1, Math.max(0, f));
      cur.style.transform = `scaleX(${1 - t})`;
    }
  }

  function go(i, { animate = true } = {}){
    const prevIndex = index;
    index = Math.max(0, Math.min(slides.length - 1, i));
    const dir = index > prevIndex ? "from-right" : "from-left";

    setTrackPx(baseXForIndex(index), animate);
    setActiveUI(dir);
  }

  // ===== Controls =====
  document.getElementById("next").addEventListener("click", () => go(index + 1, { animate: true }));
  document.getElementById("prev").addEventListener("click", () => go(index - 1, { animate: true }));

  window.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") go(index + 1, { animate: true });
    if (e.key === "ArrowLeft") go(index - 1, { animate: true });
  });

  // ===== Inertial swipe =====
  let isDragging = false;
  let startX = 0;
  let startBase = 0;
  let lastX = 0;
  let lastT = 0;
  let vx = 0;
  let activePointerId = null;

  function clampX(x){
    const min = baseXForIndex(slides.length - 1);
    const max = baseXForIndex(0);
    if (x < min) return min + (x - min) * 0.25;
    if (x > max) return max + (x - max) * 0.25;
    return x;
  }

  function onDown(clientX, pointerId){
    if (activePointerId !== null) return;
    activePointerId = pointerId ?? "touch";
    isDragging = true;

    startX = clientX;
    startBase = baseXForIndex(index);

    lastX = clientX;
    lastT = performance.now();
    vx = 0;

    track.classList.add("no-anim");
  }

  function onMove(clientX){
    if (!isDragging) return;

    const now = performance.now();
    const dx = clientX - startX;
    const target = clampX(startBase + dx);

    setTrackPx(target, false);
    setProgressDuringDrag(dx);

    const dt = now - lastT;
    if (dt > 0){
      const v = (clientX - lastX) / dt;
      vx = vx * 0.75 + v * 0.25;
      lastX = clientX;
      lastT = now;
    }
  }

  function onUp(clientX){
    if (!isDragging) return;
    isDragging = false;

    const w = slideWidth();
    const dx = clientX - startX;

    const velocityThreshold = 0.6;
    const distanceThreshold = w * 0.18;

    let targetIndex = index;

    if (Math.abs(vx) > velocityThreshold){
      targetIndex = vx > 0 ? index - 1 : index + 1;
    } else if (Math.abs(dx) > distanceThreshold){
      targetIndex = dx > 0 ? index - 1 : index + 1;
    }

    targetIndex = Math.max(0, Math.min(slides.length - 1, targetIndex));

    track.classList.remove("no-anim");
    go(targetIndex, { animate: true });

    activePointerId = null;
  }

  window.addEventListener("pointerdown", (e) => {
    if (e.pointerType === "mouse" && e.button !== 0) return;
    onDown(e.clientX, e.pointerId);
  }, { passive: true });

  window.addEventListener("pointermove", (e) => {
    if (activePointerId !== e.pointerId) return;
    onMove(e.clientX);
  }, { passive: true });

  window.addEventListener("pointerup", (e) => {
    if (activePointerId !== e.pointerId) return;
    onUp(e.clientX);
  }, { passive: true });

  window.addEventListener("pointercancel", (e) => {
    if (activePointerId !== e.pointerId) return;
    onUp(e.clientX);
  }, { passive: true });

  // Re-snap on resize (orientation change etc.)
  window.addEventListener("resize", () => {
    setTrackPx(baseXForIndex(index), false);
    setActiveUI("from-right");
  });

  // Init: iOS can lay out twice, so re-snap on next frame
  go(0, { animate: false });
  requestAnimationFrame(() => go(0, { animate: false }));
})();
</script>

</body>
</html>
```
